document.addEventListener('DOMContentLoaded', function() {
    
    // Smooth scrolling for navigation links
    document.querySelectorAll('nav a').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            e.preventDefault();
            document.querySelector(this.getAttribute('href')).scrollIntoView({
                behavior: 'smooth'
            });
        });
    });

    // Accordion functionality
    const accordionHeaders = document.querySelectorAll('.accordion-header');
    accordionHeaders.forEach(header => {
        header.addEventListener('click', () => {
            const content = header.nextElementSibling;
            header.classList.toggle('active');
            if (content.style.maxHeight) {
                content.style.maxHeight = null;
            } else {
                content.style.maxHeight = content.scrollHeight + 'px';
            }
        });
    });

    // Chart.js implementation with new colors
    const royalBlue = '#0A2463';
    const goldAccent = '#D9AE4B';
    const vibrantRed = '#dc3545';
    const vibrantGreen = '#28a745';
    const charcoal = '#343a40';
    
    // Sex Distribution Chart
    const sexCtx = document.getElementById('sexDistributionChart').getContext('2d');
    new Chart(sexCtx, {
        type: 'pie',
        data: {
            labels: ['Females', 'Males'],
            datasets: [{
                data: [63.2, 36.8],
                backgroundColor: [royalBlue, charcoal],
            }]
        },
        options: { responsive: true, plugins: { legend: { position: 'top' }}}
    });

    // Year of Study Chart
    const yearCtx = document.getElementById('yearOfStudyChart').getContext('2d');
    new Chart(yearCtx, {
        type: 'doughnut',
        data: {
            labels: ['1st Year', '2nd Year', '3rd Year'],
            datasets: [{
                data: [22.5, 36.8, 40.7],
                backgroundColor: [vibrantGreen, goldAccent, vibrantRed],
            }]
        },
        options: { responsive: true, plugins: { legend: { position: 'top' }}}
    });

    // Positive Impact Chart
    const positiveImpactCtx = document.getElementById('positiveImpactChart').getContext('2d');
    new Chart(positiveImpactCtx, {
        type: 'line',
        data: {
            labels: ['Control', 'Low', 'Moderate', 'High'],
            datasets: [
                {
                    label: 'P1: Cognitive Enhancement',
                    data: [5.9, 11.7, 14.0, 17.0],
                    borderColor: royalBlue,
                    tension: 0.2
                },
                {
                    label: 'P4: Psychological Well-being',
                    data: [5.8, 11.0, 14.2, 18.0],
                    borderColor: vibrantGreen,
                    tension: 0.2
                }
            ]
        },
        options: { responsive: true, scales: { y: { beginAtZero: true }}}
    });

    // Negative Impact Chart
    const negativeImpactCtx = document.getElementById('negativeImpactChart').getContext('2d');
    new Chart(negativeImpactCtx, {
        type: 'line',
        data: {
            labels: ['Control', 'Low', 'Moderate', 'High'],
            datasets: [
                {
                    label: 'N1: Cognitive Overreliance',
                    data: [10.0, 11.8, 11.7, 7.7],
                    borderColor: vibrantRed,
                    tension: 0.2
                },
                 {
                    label: 'N3: Psychological Stress',
                    data: [10.8, 11.8, 10.0, 7.4],
                    borderColor: goldAccent,
                    tension: 0.2
                }
            ]
        },
        options: { responsive: true, scales: { y: { beginAtZero: false }}}
    });
});
